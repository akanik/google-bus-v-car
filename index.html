<!DOCTYPE html>
<html>
<head>
    <title>Animated route</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        html, body, #map {
            height: 100%;
            margin: 0px;
            padding: 0px
        }
        #map-overlay{
            position:absolute;
            top: 50px;
            left: 10px;
            padding:20px;
            background:rgba(255,255,255,.6);
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="map-overlay">
        <form>
            Origin:
            <input type="text" id="origin" class="controls" placeholder="Search Box"><br>
            Destination:
            <input type="text" name="destination" id="destination"><br>
            <button id="routeCalc">Get Route</button>
        </form>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        var map, origin, destination;

        function initialize() {

            map = new google.maps.Map(document.getElementById("map"), {
              center: {lat:38.247907, lng:-85.759993},
              zoom: 11,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            // Create the search box and link it to the UI element.
            origin = document.getElementById('origin');
            destination = document.getElementById('destination');
            
            var originSearchBox = new google.maps.places.SearchBox(origin);
            //map.controls[google.maps.ControlPosition.TOP_LEFT].push(origin);
            
            var destinationSearchBox = new google.maps.places.SearchBox(destination);
            //map.controls[google.maps.ControlPosition.TOP_LEFT].push(destination);
            
            // Bias the SearchBox results towards current map's viewport.
            map.addListener('bounds_changed', function() {
              originSearchBox.setBounds(map.getBounds());
              destinationSearchBox.setBounds(map.getBounds());
            });
            
            originSearchBox.addListener('places_changed', function() {
                var originPlaces = originSearchBox.getPlaces();
                var destinationPlaces = destinationSearchBox.getPlaces();
            });
            
            destinationSearchBox.addListener('places_changed', function() {
                var originPlaces = originSearchBox.getPlaces();
                var destinationPlaces = destinationSearchBox.getPlaces();
            });
            
            //var markers = [];
            //// Listen for the event fired when the user selects a prediction and retrieve
            //// more details for that place.
            //searchBox.addListener('places_changed', function() {
            //    var places = searchBox.getPlaces();
            //
            //    if (places.length == 0) {
            //        return;
            //    }
            //
            //    // Clear out the old markers.
            //    markers.forEach(function(marker) {
            //        marker.setMap(null);
            //    });
            //    markers = [];
            //
            //    // For each place, get the icon, name and location.
            //    var bounds = new google.maps.LatLngBounds();
            //    
            //    places.forEach(function(place) {
            //        if (!place.geometry) {
            //            console.log("Returned place contains no geometry");
            //            return;
            //        }
            //        
            //        var icon = {
            //            url: place.icon,
            //            size: new google.maps.Size(71, 71),
            //            origin: new google.maps.Point(0, 0),
            //            anchor: new google.maps.Point(17, 34),
            //            scaledSize: new google.maps.Size(25, 25)
            //        };
            //
            //        // Create a marker for each place.
            //        markers.push(new google.maps.Marker({
            //            map: map,
            //            icon: icon,
            //            title: place.name,
            //            position: place.geometry.location
            //        }));
            //
            //        if (place.geometry.viewport) {
            //            // Only geocodes have viewport.
            //            bounds.union(place.geometry.viewport);
            //        } else {
            //            bounds.extend(place.geometry.location);
            //        }
            //    });
            //    map.fitBounds(bounds);
            //});            
        }
        
        function drawDrivingRoute(){
            var markers = [];
        };
        
        function calculateRoute(start, end){
            
            var directionsService = new google.maps.DirectionsService();
            var directionsDisplay = new google.maps.DirectionsRenderer();
            
            var carRequest = {
                origin: start,
                destination: end,
                travelMode: 'DRIVING'
            };
            
            var busRequest = {
                origin: start,
                destination: end,
                travelMode: 'TRANSIT'
            };
            
            directionsService.route(carRequest, function(result, status) {
                
                if (status == 'OK') {
                    directionsDisplay.setDirections(result);
                    drivingCoordinates = result.routes[0].overview_path;
                    console.log(drivingCoordinates);
                }
            });
            
            directionsService.route(busRequest, function(result, status) {
                if (status == 'OK') {
                    directionsDisplay.setDirections(result);
                    busCoordinates = result.routes[0].overview_path;
                    console.log(busCoordinates);
                }
            });
        };
        
        $('#routeCalc').click(function(event){
            var start = origin.value;
            var end = destination.value;
            
            calculateRoute(start, end);
            
            event.stopPropagation();
            return false;
        });
        
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;libraries=geometry,places&key=AIzaSyCYTUE0hvNPcioxBbCGMBwVNJzUjswdou0&callback=initialize"></script>
</body>
</html>